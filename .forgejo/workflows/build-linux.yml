steps:
  build:
    image: alpine
    # this step gets ran on "master" and "dev" branch.
    # also runs on pull requests targeting these branch.
    when:
      branch: [master, dev, woodpecker]
      event: [push, pull_request]
    commands: |
      # alpine uses build-base for dev utilies such as system headers, make etc.
      apk add --no-cache build-base gcc >/dev/null
      # treat warnings as errors. assuming the Makefile respects enviornment $CFLAGS
      export CFLAGS="-Werror"
      # run the build.
      make      
